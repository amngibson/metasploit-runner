#!/usr/bin/env ruby

require 'metasploit/exploit'

$stdout.sync = true

if ARGV.grep(/^--/).empty?
  Metasploit::Exploit.start({
      'connection_url' => ARGV[0],
      'port' => ARGV[1],
      'uri' => ARGV[2],
      'use_ssl' => ARGV[3],
      'token' => ARGV[4],
      'workspace_name' => ARGV[5],
      'nexpose_console_name' => ARGV[6],
      'device_ip_to_scan' => ARGV[7],
      'use_os_filter' => ARGV[8],
      'module_filter' => ARGV[9],
      'report_type' => ARGV[10],
      'whitelist_hosts' => ARGV[11],
      'ssl_version' => ARGV[12]
  })
else
  Metasploit::Exploit.start(ARGV)
end
